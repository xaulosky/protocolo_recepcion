<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cialo Hub</title>

    <!-- Disable cache for development -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- PWA DESACTIVADA
    <meta name="description" content="Cialo Hub - Sistema integral de información de Clínica Cialo">
    <meta name="theme-color" content="#0f172a">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Cialo">
    <link rel="manifest" href="/manifest.json">
    -->

    <!-- Descripción básica (sin PWA) -->
    <meta name="description" content="Cialo Hub - Sistema integral de información de Clínica Cialo">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- SheetJS (Excel Export) -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="bg-slate-900 text-slate-800 min-h-screen">

    <!-- Mobile Menu Button (visible only on mobile) -->
    <div id="mobileHeader" class="mobile-header lg:hidden">
        <button onclick="openMobileSidebar()" class="mobile-menu-btn" aria-label="Abrir menú">
            <i data-lucide="menu" class="w-6 h-6"></i>
        </button>
        <span class="mobile-title">Cialo Hub</span>
        <div class="w-6"></div> <!-- Spacer for centering -->
    </div>

    <!-- Sidebar Overlay (for mobile) -->
    <div id="sidebarOverlay" class="sidebar-overlay hidden" onclick="closeMobileSidebar()"></div>

    <!-- App Container with Sidebar -->
    <div class="app-container">

        <!-- SIDEBAR (estructura fija, contenido dinámico) -->
        <aside id="sidebar" class="sidebar" role="navigation">
            <!-- Header del Sidebar (fijo) -->
            <div class="sidebar-header">
                <div class="sidebar-logo" id="sidebarLogo">
                    <i data-lucide="layout-dashboard" class="w-6 h-6 text-purple-400"></i>
                    <span class="sidebar-title">Cialo Hub</span>
                </div>
                <button onclick="toggleSidebar()" class="sidebar-toggle" aria-label="Toggle sidebar">
                    <i data-lucide="panel-left-close" id="sidebarToggleIcon" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Búsqueda (fija, nunca se re-renderiza) -->
            <div class="sidebar-search" id="sidebarSearchContainer">
                <div class="relative">
                    <i data-lucide="search"
                        class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                    <input type="text" id="globalSearchInput" placeholder="Buscar..." class="sidebar-search-input"
                        autocomplete="off">
                    <button id="clearSearchBtn" onclick="clearGlobalSearch()"
                        class="absolute right-2 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-300 hidden">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>

            <!-- Navegación (dinámica) -->
            <nav id="sidebarNav" class="sidebar-nav"></nav>

            <!-- Footer del Sidebar -->
            <div class="sidebar-footer" id="sidebarFooter">
                <div class="text-xs text-slate-500 text-center">
                    <p>Clínica Cialo</p>
                    <p class="text-slate-600">v1.0.0</p>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- MAIN CONTENT CONTAINER -->
                <div id="mainContent" class="flex flex-col flex-grow"></div>
            </div>
        </main>

    </div>

    <!-- Application Scripts - Cache disabled with timestamp -->
    <script>const v = Date.now();</script>
    <script src="js/data.js"></script>
    <script src="js/productsData.js"></script>
    <script src="js/protocolsData.js"></script>
    <script src="js/tratamientosData.js"></script>
    <script src="js/consentimientosData.js"></script>
    <script src="js/profesionalesData.js"></script>
    <script src="js/tratamientosProfesionalesData.js"></script>
    <script src="js/consultasData.js"></script>
    <script src="js/boxesData.js"></script>
    <script src="js/state.js"></script>
    <script src="js/components/Sidebar.js"></script>
    <script src="js/components/Header.js"></script>
    <script src="js/components/SearchBar.js"></script>
    <script src="js/components/TabNavigation.js"></script>
    <script src="js/components/ProtocolBase.js"></script>
    <script src="js/components/GuionesContent.js"></script>
    <script src="js/components/PagosContent.js"></script>
    <script src="js/components/ProtocoloSuspensionContent.js"></script>
    <script src="js/components/ProductosContent.js"></script>
    <script src="js/components/ConsentimientosContent.js"></script>
    <script src="js/components/ConsentSignature.js"></script>
    <script src="js/components/PresupuestosContent.js"></script>
    <script src="js/components/PresupuestosAIContent.js"></script>
    <script src="js/components/ProfesionalesContent.js"></script>
    <script src="js/components/BoxesContent.js"></script>
    <script src="js/components/TratamientosContent.js"></script>
    <script src="js/components/ConsultasContent.js"></script>
    <script src="js/components/SolicitudReembolsoContent.js"></script>
    <script src="js/components/GiftCardContent.js"></script>
    <script src="js/components/SearchResults.js"></script>
    <script src="js/utils/excelExporter.js"></script>
    <script src="js/faqData.js"></script>
    <script src="js/components/ProtocolCategoryContent.js"></script>
    <script src="js/components/FAQContent.js"></script>
    <script src="js/components/HomeContent.js"></script>
    <!-- PWA DESACTIVADA: <script src="js/pwa.js"></script> -->
    <script src="js/app.js"></script>

    <!-- Cache buster: Reload all scripts dynamically -->
    <script>
        // Force reload scripts on development
        if (location.protocol === 'file:' || location.hostname === 'localhost') {
            const scripts = document.querySelectorAll('script[src]');
            scripts.forEach(script => {
                if (script.src && !script.src.includes('cdn') && !script.src.includes('unpkg')) {
                    const newScript = document.createElement('script');
                    newScript.src = script.src.split('?')[0] + '?v=' + Date.now();
                    script.parentNode.replaceChild(newScript, script);
                }
            });
        }
    </script>

</body>

</html>